<ng-template #personTemplateRef let-person>
  <span *ngIf="person" [class]="person.gender">
    <mat-card>
      <mat-card-content *ngIf="person.pics">
        <img class="person-pic" src="/assets/family/images/{{person.name}}/{{person.pics[getPicIndex(person)]}}" alt="{{person.name}}">
      </mat-card-content>
      <mat-card-footer>{{person.fullName}}</mat-card-footer>
    </mat-card>
  </span>
</ng-template>

<ng-template #nodeTemplateRef let-person>
  <ul>
    <li>
      <div>
        <ng-template ngFor [ngForOf]="[person]" [ngForTemplate]="personTemplateRef"></ng-template>
        <span class="spacer" *ngIf="person.spouse"></span>
        <ng-template ngFor [ngForOf]="[people.get(person.spouse)]" [ngForTemplate]="personTemplateRef"></ng-template>
      </div>
        <ng-template ngFor [ngForOf]="person.kids" [ngForTemplate]="nodeTemplateRef"></ng-template>
    </li>
  </ul>
</ng-template>

<mat-card *ngFor="let person of getFamilyData()">
  <div class="tree" id="FamilyTreeDiv-{{person.name}}" fxLayout="row" fxLayoutAlign="center">
    <ng-template
      [ngTemplateOutlet]="nodeTemplateRef"
      [ngTemplateOutletContext]="{ $implicit: person }">
    </ng-template>
  </div>
</mat-card>

<div class="tree" id="FamilyTreeDiv2">
  <ul>
    <li>
      <div>
        <ng-template ngFor [ngForOf]="[people.get('ram-nawal-kushwaha')]" [ngForTemplate]="personTemplateRef"></ng-template>
        <span class="spacer"></span>
        <ng-template ngFor [ngForOf]="[people.get('ram-shri-kushwaha')]" [ngForTemplate]="personTemplateRef"></ng-template>
      </div>
      <ul>
        <li>
          <div>
            <ng-template ngFor [ngForOf]="[people.get('rajesh-kushwaha')]" [ngForTemplate]="personTemplateRef"></ng-template>
            <span class="spacer"></span>
            <ng-template ngFor [ngForOf]="[people.get('sandhya-kushwaha')]" [ngForTemplate]="personTemplateRef"></ng-template>
          </div>
          <ul>
            <li>
              <div>
                <ng-template ngFor [ngForOf]="[people.get('shreyansh')]" [ngForTemplate]="personTemplateRef"></ng-template>
              </div>
            </li>
            <li>
              <div>
                <ng-template ngFor [ngForOf]="[people.get('yash')]" [ngForTemplate]="personTemplateRef"></ng-template>
              </div>
            </li>
          </ul>
        </li>
        <li>
          <div>
            <ng-template ngFor [ngForOf]="[people.get('suresh-kushwaha')]" [ngForTemplate]="personTemplateRef"></ng-template>
            <span class="spacer"></span>
            <ng-template ngFor [ngForOf]="[people.get('sharmila')]" [ngForTemplate]="personTemplateRef"></ng-template>
          </div>
          <ul>
            <li>
              <div><span class="female">Kanika</span></div>
            </li>
            <li>
              <div><span class="female">Kavya</span></div>
            </li>
          </ul>
        </li>
        <li>
          <div>
            <ng-template ngFor [ngForOf]="[people.get('vandana-kushwaha')]" [ngForTemplate]="personTemplateRef"></ng-template>
            <span class="spacer"></span>
            <ng-template ngFor [ngForOf]="[people.get('amresh-das')]" [ngForTemplate]="personTemplateRef"></ng-template>
          </div>
          <ul>
            <li>
              <div>
                <ng-template ngFor [ngForOf]="[people.get('aarav-das')]" [ngForTemplate]="personTemplateRef"></ng-template>
              </div>
            </li>
          </ul>
        </li>
        <li>
          <div>
            <ng-template ngFor [ngForOf]="[people.get('vijay-kushwaha')]" [ngForTemplate]="personTemplateRef"></ng-template>
            <span class="spacer"></span>
            <ng-template ngFor [ngForOf]="[people.get('geeta')]" [ngForTemplate]="personTemplateRef"></ng-template>
          </div>
        </li>
      </ul>
    </li>
  </ul>
</div>
